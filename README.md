# Haward

Фантазия у меня внезапно закончилась когда я начал делать эту утилиту,
поэтому она называется head award.

-----

## ВАЖНА

**Логи живут только 5 дней**, потом СК их автоматически чистит

-----

## Описание

Ну.

Некоторые человечки придумали и организовали игровой ивент - охота за головами.

То есть существует некоторый список с наградой за каждую голову. То есть за сбитого игрока дают очки.
Но вот есть заковырка - неудобно постоянно держать список в голове,
и тем более неудобно постоянно делать скриншоты каждого убийства (подтверждение что ты реально убил, а не приснилось).

Собсна моя ленивая головажопа родила мысль - написать утилитку которая сможет считать мои очки за меня.

-----

## Чо как

Всё до отупения просто - у СК есть логи. И в логах отображается ну очень много инфы,
вплоть до того что вы нанесли 213 урона с залпового орудия по дрону с маяка.

Естественно информация об убийствах там тоже есть, надо лишь её найти.

### А где

Минутка джонинатора: один раз я смог нагуглить что он сделал утилиту для уведомлений <https://gitlab.com/JohnZi/SCNotify/-/blob/master/main.c>.

И там же в комментариях написано в какой именно папке СК хранит логи.

- Для богомерзкой винды: 'Documents\My Games\StarConflict\logs'
- Для божественного линуха: '.local/share/starconflict/logs'
- Для обосранного мака: 'Libary/Application Support/Star Conflict/logs'

### А что в логах

А вот лениво мне описывать всё что там происходит, дам только краткое описание файлов

`chat.log` - все сообщения чата, включая глобальный и чат группы
`combat.log` - самый жырный лог, в нём прописано всё что происходит в бою.
`game.log` - скорее всего самый служебный файл, тут показано что начинается бой, какие игроки присоединились к игровой сессии и т.д.
`game.net.log` - очевидно сетевое взаимодействие. В нём я сильно не копался и сказать больше ничего не могу.

-----

## Выхлоп

Строчки лога это круто, но их надо обмазать некоторой дополнительной информацией
(например не у всех кланов есть тег и надо запрашивать клан конкретного игрока).

### А почему csv

Мне было лениво делать графику или интерфейс в консоли, поэтому результат работы утилиты - файл формата CSV.
Если вы не знаете что это такое, то оно вам и не надо. Самое важное что этот файл можно открыть бомжацким EXCEL.

-----

## Вхлоп

А, чуть не забыл о самом важном - список охоты. Я подумал что излишне делать его в формате yaml или прости господи json,
поэтому изобрёл свою какашку:

```text
=== PLAYERS ===

+5

Mettle
KpAcABa
JERICHOx3D
dimasa
redovner
Koven1Nordsiard, TechnerParsival1

===

+8

Jigolee
lOpa
ZiroTwo

===

+10

FireWarrior
MaxVerzila
SenyA

===

-40

PlayWithMe
Mzhelskii
Siiiiik

=== CORPORATIONS ===

+10

Nekopara
Feeling of Greatness [4CB]
Fright Night [FINS]

===

+5

The Dark Invaders [xIDx]
```

Надеюсь тут всё предельно просто и понятно, но всё же:

Есть 2 секции: `=== PLAYERS ===` и `=== CORPORATIONS ===`.

В секции `=== PLAYERS ===` указаны награды за конкретных игроков.
В секции `=== CORPORATIONS ===` указаны награды за членов корпораци.

Про игроков:

```text
+5

Mettle
KpAcABa
JERICHOx3D
dimasa
redovner
Koven1Nordsiard, TechnerParsival1

===

+8

Jigolee
lOpa
ZiroTwo
```

`+5` и `+8` это очки которые дают за пилотов ниже.
`===` это разделитель между группами очков.

То есть за игрока `Mettle` дают 5 очков, а за игрока `ZiroTwo` дают 8 очков.

__кусочек фичи__: `Koven1Nordsiard, TechnerParsival1`

Иногда люди меняют никнеймы, и я добавил возможность указать прошлые никнеймы и текущий.
`Koven1Nordsiard` - старый ник, `TechnerParsival1` - новый.

Так же можно указать хоть 10 ников.

## Как использовать

Ну если вы до сих пор не посмотрели `--help` то я восхищаюсь тем что вы досюда дочитали.

```text
Usage of ./haward:
  -dir string
        Path to logs directory (default ".local/share/starconflict/logs")
  -nick string
        Your nickname (default "ZiroTwo")
  -o string
        Path to the output file (default "out.csv")
  -rules string
        Path to the rules file (default "rules.txt")
```

Как я и говорил в самом начале - прога без графики, прога консольная.
Виндузятники могут либо испугаться, либо включить гугл и посмотреть как запускать программы через консоль.

## Косяки

По правилам ивента сбитие своих соклановцев не засчитывается.
Такую проверку сделать несложно, но мне прям максимально влом.
Тем более что в EXCEL можно не считать сбития сокланов,
так что руки в ноги, ноги в зубы, глаза в логи и вперёд.
